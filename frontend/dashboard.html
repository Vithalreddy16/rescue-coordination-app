<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agency Dashboard</title>
    
    <!-- CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- This is the library for all the new icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <!-- This is for the fade-in animations -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Your custom stylesheet -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- JS Libraries (loaded in head for proper rendering) -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body class="bg-dark-gradient">

    <!-- 1. Enhanced Top Navigation Bar -->
    <nav class="navbar navbar-dark bg-danger shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="#"><i class="fas fa-bullhorn me-2"></i> Agency Dashboard</a>
            <button class="btn btn-dark" id="logout-btn"><i class="fas fa-sign-out-alt me-2"></i> Logout</button>
        </div>
    </nav>

    <!-- Main Content Container -->
    <div class="container my-4">
        <!-- 2. Enhanced Welcome Header -->
        <div class="p-4 mb-4 bg-white rounded-3 shadow-sm border-start border-danger border-5" data-aos="fade-down">
            <h2 class="display-6">Welcome, <span id="agency-name" class="text-danger fw-bold">Loading...</span>!</h2>
            <p class="lead" id="agency-email">Loading your details...</p>
        </div>
        
        <!-- 3. New Two-Column Layout -->
        <div class="row">
            <!-- Left Column: Vertical Tab Navigation -->
            <div class="col-lg-3 mb-4" data-aos="fade-right">
                <div class="list-group shadow-sm dashboard-nav" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <button class="list-group-item list-group-item-action active" data-bs-toggle="pill" data-bs-target="#v-pills-alerts" type="button" role="tab">
                        <i class="fas fa-bell me-2"></i> New Alerts
                        <span class="badge bg-danger float-end" id="alerts-count">0</span>
                    </button>
                    <button class="list-group-item list-group-item-action" data-bs-toggle="pill" data-bs-target="#v-pills-collab" type="button" role="tab">
                        <i class="fas fa-users me-2"></i> Collaboration
                        <span class="badge bg-info float-end" id="collab-count">0</span>
                    </button>
                    <button class="list-group-item list-group-item-action" data-bs-toggle="pill" data-bs-target="#v-pills-profile" type="button" role="tab">
                        <i class="fas fa-user-edit me-2"></i> My Profile
                    </button>
                </div>
            </div>

            <!-- Right Column: Tab Content -->
            <div class="col-lg-9" data-aos="fade-left" data-aos-delay="100">
                <div class="tab-content" id="v-pills-tabContent">
                    <!-- Alerts Panel -->
                    <div class="tab-pane fade show active" id="v-pills-alerts" role="tabpanel">
                        <div class="card shadow-sm"><div class="card-body"><div id="alerts-list" class="list-group"></div></div></div>
                    </div>
                    <!-- Collaboration Panel -->
                    <div class="tab-pane fade" id="v-pills-collab" role="tabpanel">
                        <div class="card shadow-sm"><div class="card-body"><h5>Incoming Collaboration Requests</h5><div id="collab-requests-list" class="list-group mb-4"></div><hr><h5>My Accepted Issues</h5><p class="text-muted small">Select an issue to request help from another agency.</p><div id="my-accepted-issues-list" class="list-group"></div></div></div>
                    </div>
                    <!-- Profile Panel -->
                    <div class="tab-pane fade" id="v-pills-profile" role="tabpanel">
                        <div class="card shadow-sm"><div class="card-body"><h3>Update Your Profile</h3><form id="profile-update-form"><div class="mb-3"><label for="profile-name" class="form-label">Agency Name</label><input type="text" class="form-control" id="profile-name"></div><div class="mb-3"><label for="profile-phone" class="form-label">Contact Phone</label><input type="tel" class="form-control" id="profile-phone"></div><div class="mb-3"><label for="profile-expertise" class="form-label">Areas of Expertise</label><input type="text" class="form-control" id="profile-expertise" placeholder="e.g., First Aid, Search & Rescue"><div class="form-text">Enter skills separated by commas.</div></div><div class="mb-3"><label for="profile-region" class="form-label">Service Region</label><input type="text" class="form-control" id="profile-region" placeholder="e.g., Downtown Metro Area"></div><hr><h5>Update Location</h5><div id="profile-map" style="height: 250px; width: 100%; margin-bottom: 15px; border-radius: 5px; overflow: hidden;"></div><div class="input-group mb-3"><input type="text" class="form-control" id="profile-latitude" placeholder="Latitude" readonly><input type="text" class="form-control" id="profile-longitude" placeholder="Longitude" readonly></div><button type="submit" class="btn btn-primary">Save Profile Changes</button></form><div id="profile-update-message" class="mt-3"></div></div></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Collaboration Request Modal (Unchanged) -->
    <div class="modal fade" id="collabModal" tabindex="-1">
        <div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Request Collaboration</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form id="collab-form"><input type="hidden" id="collab-issue-id"><div class="mb-3"><label for="agency-select" class="form-label">Select Agency</label><select class="form-select" id="agency-select" required></select></div><div class="mb-3"><label for="collab-message" class="form-label">Message</label><textarea class="form-control" id="collab-message" rows="3" required></textarea></div><button type="submit" class="btn btn-primary">Send Request</button></form></div></div></div>
    </div>

    <!-- 4. Professional Footer -->
    <footer class="bg-dark text-white text-center py-3 mt-auto">
        <div class="container">
            <p class="m-0">&copy; 2024 Rescue Coordination Center. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- 5. All JavaScript files at the end -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 600,
            once: true,
        });
    </script>
    <script src="js/dashboard.js"></script>

</body>
</html>
